<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datanla - Quản lý ảnh (Staff)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="css/staff.css">
</head>
<body>
    <header class="topbar">
        <div class="header-content">
            <div class="logo-section">
                <img src="https://scontent.fsgn5-3.fna.fbcdn.net/v/t39.30808-6/387790379_840485701202951_5775669728894156441_n.jpg?_nc_cat=1&ccb=1-7&_nc_sid=6ee11a&_nc_ohc=5d8NdgruuNMQ7kNvwH36G2n&_nc_oc=AdnNaWY1x5lovFD003FdTDlJUE1GExMszBAWXjLxe8ha7gIK9OEMlXfkj1IoBLUvdW0&_nc_zt=23&_nc_ht=scontent.fsgn5-3.fna&_nc_gid=SOnxXtu5YWdQTooych_3XA&oh=00_Afjg1tgCjJ8H1wwPN9QUxprBzS5Qk0y81CuOtimH7j9ntg&oe=6911E57A" alt="Datanla Logo" class="logo-image">
                <div class="logo-text">
                    <h1>DATANLA</h1>
                    <span class="tagline">Staff Dashboard</span>
                </div>
            </div>
        </div>
        <div class="topbar-right">
            <div class="user-dropdown">
                <button class="user-info" id="userDropdownBtn">
                    <i class="fa-solid fa-user-circle"></i>
                    <span>Nhân viên</span>
                    <i class="fa-solid fa-chevron-down"></i>
                </button>
                <div class="dropdown-menu hidden" id="userDropdownMenu">
                    <a href="#" class="dropdown-item" id="adminStatsBtn">
                        <i class="fa-solid fa-chart-line"></i>
                        <span>Thống kê & Báo cáo</span>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item" id="logoutBtn">
                        <i class="fa-solid fa-right-from-bracket"></i>
                        <span>Đăng xuất</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="main-container">
        <aside class="sidebar">
            <div class="kpi-section">
                <h3>Thống kê hôm nay</h3>
                <div class="kpi-grid">
                    <div class="kpi-card kpi-total" data-filter="">
                        <div class="kpi-icon"><i class="fa-solid fa-images"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-value" id="kpiTotal">0</div>
                            <div class="kpi-label">Tổng đơn</div>
                        </div>
                    </div>
                    <div class="kpi-card kpi-printing" data-filter="PRINTING">
                        <div class="kpi-icon"><i class="fa-solid fa-print"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-value" id="kpiPrinting">0</div>
                            <div class="kpi-label">Đang in</div>
                        </div>
                    </div>
                    <div class="kpi-card kpi-ready" data-filter="SUCCESS">
                        <div class="kpi-icon"><i class="fa-solid fa-circle-check"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-value" id="kpiReady">0</div>
                            <div class="kpi-label">Sẵn sàng</div>
                        </div>
                    </div>
                    <div class="kpi-card kpi-error" data-filter="ERROR">
                        <div class="kpi-icon"><i class="fa-solid fa-triangle-exclamation"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-value" id="kpiError">0</div>
                            <div class="kpi-label">Lỗi</div>
                        </div>
                    </div>
                    <div class="kpi-card kpi-delivered" data-filter="DELIVERED">
                        <div class="kpi-icon"><i class="fa-solid fa-box"></i></div>
                        <div class="kpi-content">
                            <div class="kpi-value" id="kpiDelivered">0</div>
                            <div class="kpi-label">Đã giao</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls-section">
                <h3>Thao tác</h3>
                <button class="btn btn-primary" id="btnSimulateOrder">
                    <i class="fa-solid fa-plus"></i>
                    Tạo đơn mới
                </button>
                <label class="toggle-control">
                    <input type="checkbox" id="toggleAutoSimulate">
                    <span>Tự động in ảnh</span>
                </label>
            </div>
        </aside>

        <main class="main-content">
            <div class="toolbar">
                <div class="search-bar">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" id="searchInput" placeholder="Tìm mã ảnh...">
                </div>
                <div class="filters">
                    <select id="filterStatus">
                        <option value="">Tất cả trạng thái</option>
                        <option value="IN_QUEUE">Chờ in</option>
                        <option value="PRINTING">Đang in</option>
                        <option value="SUCCESS">Sẵn sàng</option>
                        <option value="ERROR">Lỗi</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th width="50">
                                <input type="checkbox" id="selectAll">
                            </th>
                            <th>Mã ảnh</th>
                            <th>Khách hàng</th>
                            <th>Giá</th>
                            <th>Thanh toán</th>
                            <th>Trạng thái</th>
                            <th>Lần in</th>
                            <th>Cập nhật</th>
                            <th width="280">Thao tác</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <tr>
                            <td colspan="9" class="empty-row">Đang tải dữ liệu...</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="delivered-section">
                <button class="delivered-toggle" id="deliveredToggle">
                    <i class="fa-solid fa-chevron-down"></i>
                    <span>Đã giao (<span id="deliveredCount">0</span>)</span>
                </button>
                <div class="delivered-list hidden" id="deliveredList">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Mã ảnh</th>
                                <th>Khách hàng</th>
                                <th>Giá</th>
                                <th>Nhận lúc</th>
                            </tr>
                        </thead>
                        <tbody id="deliveredTableBody">
                            <tr>
                                <td colspan="4" class="empty-row">Chưa có đơn đã giao</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <div class="modal hidden" id="noteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Thêm ghi chú</h3>
                <button class="btn-close" id="closeNoteModal">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <div class="modal-body">
                <textarea id="noteInput" rows="4" placeholder="Nhập ghi chú..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelNote">Hủy</button>
                <button class="btn btn-primary" id="saveNote">Lưu</button>
            </div>
        </div>
    </div>

    <script src="js/staff.js"></script>
</body>
</html>